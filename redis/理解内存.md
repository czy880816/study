# 一、内存消耗

## 1、内存消耗的划分

Redis进程内消耗主要包括：自身内存+对象内存+缓冲内存+内存碎片,如下图所示：

![](/Users/lixiaojie/github/study/pictures/redis内存消耗划分-1.png.png)

1）对象内存是redis内存占用最大的一块，存储着用户所有的数据

redis所有的数据都是采用k-v数据类型，每次创建键值对时，至少创建两种类型的对象，键对象使用的是字符串，在使用redis时很容易忽略健对内存消耗的影响，应当避免使用过长的键。value对象复杂些，包括五种数据类型。其他数据类型都是建立在这五种数据类型之上实现的，如Bitmaps和HyperLogLog都是使用字符串实现，GEO使用有序集合实现等。

2）缓冲内存：

缓冲区内存主要包括**客户端缓冲**、**复制积压区缓冲区**、**AOF缓冲区**

**客户端缓冲**指的是所有接入redis服务器的tcp链接的输入输出缓冲。输入缓冲无法控制，最大空间1G，如果超过将断开连接，输出缓冲通过参数client-output-buffer-limit控制